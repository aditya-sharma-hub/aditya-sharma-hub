name: Generate Neon Tokyo Night Pac-Man Animation

on:
  schedule:
    - cron: "0 0 * * *"   # Auto-run daily at midnight UTC
  workflow_dispatch:       # Allow manual trigger

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸŒ€ Checkout repository
        uses: actions/checkout@v3

      - name: ðŸŽ¨ Generate Pac-Man Animation
        uses: Platane/snk@v3
        with:
          github_user_name: aditya-sharma-hub
          outputs: |
            dist/pacman-tokyonight.svg
          # Theme configuration â€” Cyberpunk Tokyo Night
          palette: "github-dark"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: ðŸ’« Apply Neon Tokyo Night Glow
        run: |
          mkdir -p output
          cp dist/pacman-tokyonight.svg output/
          # Apply neon gradient glow
          sed -i 's/fill="yellow"/fill="url(#neonGradient)"/g' output/pacman-tokyonight.svg
          sed -i '/<svg/a \
          <defs>\
            <linearGradient id="neonGradient" x1="0%" y1="0%" x2="100%" y2="100%">\
              <stop offset="0%" style="stop-color:#8A2BE2; stop-opacity:1" />\
              <stop offset="100%" style="stop-color:#1E90FF; stop-opacity:1" />\
            </linearGradient>\
            <filter id="neonGlow">\
              <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>\
              <feMerge>\
                <feMergeNode in="coloredBlur"/>\
                <feMergeNode in="SourceGraphic"/>\
              </feMerge>\
            </filter>\
          </defs>\
          ' output/pacman-tokyonight.svg
          sed -i 's/<path/<path filter="url(#neonGlow)"/g' output/pacman-tokyonight.svg
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git add output/pacman-tokyonight.svg
          git commit -m "ðŸŒŒ Added neon Tokyo Night Pac-Man animation" || echo "No changes to commit"
          git push
